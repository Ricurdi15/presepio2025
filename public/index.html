<!DOCTYPE html>
<html lang="it">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <title>Presepio 2020 II - 2025</title>
    <!-- Google Fonts - Elegant Christmas Typography -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    
    <link
        href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;600;700&family=Cormorant+Garamond:ital,wght@0,400;0,600;1,400&family=Quicksand:wght@400;500;600&display=swap"
        rel="stylesheet">

   <link rel="stylesheet" href="style.css">
</head>

<body>
    <!-- 16-bit Stars Effect -->
    <div class="stars-container" id="starsContainer"></div>

    <!-- Snowfall Effect -->
    <div class="snowfall" id="snowfall"></div>

    <!-- Start Screen -->
    <div id="startScreen">
        <div class="star-decoration">â­</div>
        <img src="img/logo.png" alt="Presepio 2020 II" class="logo-image">
        <p class="subtitle">Un'avventura verso la NativitÃ </p>
        <div class="start-content">
            <div class="mission">
                ğŸ„ <strong>LA TUA MISSIONE</strong> ğŸ„<br><br>
                Raggiungi <strong>5500 passi</strong><br>
                per arrivare al Presepio!
            </div>
            <div class="controls-info">
                <div class="controls-info-title">ğŸ® COMANDI</div>
                <span class="control-item">ğŸ’» <strong>PC:</strong> Premi SPAZIO per saltare</span>
                <span class="control-item">ğŸ“± <strong>Mobile:</strong> Tocca lo schermo per saltare</span>
            </div>
        </div>
        <button id="startButton">âœ¨ INIZIA IL VIAGGIO âœ¨</button>
        <button id="startLeaderboardBtn" class="leaderboard-btn-secondary">ğŸ† Classifica</button>
    </div>

    <!-- Rotate Message -->
    <div id="rotateMessage">
        <div class="rotate-icon">ğŸ“±â¡ï¸</div>
        <h2>Ruota il dispositivo</h2>
        <p>Il gioco funziona meglio in orizzontale</p>
    </div>

    <!-- Game Container -->
    <div id="gameContainer">
        <button id="exitFullscreen">âœ• Esci</button>
        <button id="leaderboardBtn" title="Classifica">ğŸ†</button>

        <canvas id="gameCanvas" width="800" height="400"></canvas>

        <div id="scoreBoard">
            <div>Distanza: <span id="score">0</span></div>
            <div id="goalProgress">Meta: 5500</div>
            <div class="record-line">
                Record: <span id="highScoreValue">0</span>
            </div>
        </div>
    </div>

    <!-- Nativity Ending Screen - Desktop Optimized -->
    <div id="nativityEnding">
        <div class="nativity-container">
            <div class="nativity-header">
                <h2>ğŸŒŸ SEI ARRIVATO AL PRESEPIO! ğŸŒŸ</h2>
            </div>

            <div class="nativity-image-wrapper">
                <div class="image-glow"></div>
                <img src="img/presepio.png" alt="Presepio" id="presepioImg">
                <div class="share-cta">
                    <span class="share-cta-text">âœ¨ Condividi il Presepio! âœ¨</span>
                    <button id="shareBtn" class="share-button" title="Condividi">
                        <span class="share-icon">ğŸ“¤</span>
                        <span class="share-text">Condividi</span>
                    </button>
                </div>
            </div>

            <div class="nativity-content">
                <div class="score-display">
                    <div class="label">Distanza percorsa</div>
                    <div class="value"><span id="nativityFinalScore">0</span></div>
                </div>

                <div class="save-section">
                    <input type="text" id="nativityNameInput" placeholder="Il tuo nome" maxlength="20">
                    <button id="nativitySubmitBtn">SALVA NELLA CLASSIFICA</button>
                </div>

                <button id="nativityRestartBtn">ğŸ”„ RIGIOCA</button>
                <button id="nativityLeaderboardBtn" class="leaderboard-btn-secondary">ğŸ† Classifica</button>
            </div>
        </div>
    </div>

    <!-- Game Over Screen -->
    <div id="gameOver">
        <h2>VIAGGIO INTERROTTO</h2>
        <p>Distanza: <span id="finalScore">0</span></p>
        <p class="goal-message" id="goalMessage"></p>
        <p id="newRecord" style="display: none;">
            â­ NUOVO RECORD! â­
        </p>

        <div id="submitScoreSection">
            <input type="text" id="nameInput" placeholder="Il tuo nome" maxlength="20">
            <button id="submitScoreBtn" class="btn">SALVA CLASSIFICA</button>
        </div>

        <button id="restartBtn" class="btn">ğŸ”„ RIPROVA VIAGGIO</button>
    </div>

    <!-- Share Modal (Fallback for desktop) -->
    <div id="shareModal" class="share-modal">
        <div class="share-modal-content">
            <h3>ğŸ“¤ Condividi il Presepio</h3>
            <div class="share-options">
                <a href="#" id="shareFacebook" class="share-option" target="_blank">
                    <span class="icon">ğŸ“˜</span>
                    <span class="label">Facebook</span>
                </a>
                <a href="#" id="shareTwitter" class="share-option" target="_blank">
                    <span class="icon">ğŸ¦</span>
                    <span class="label">Twitter</span>
                </a>
                <a href="#" id="shareWhatsapp" class="share-option" target="_blank">
                    <span class="icon">ğŸ’¬</span>
                    <span class="label">WhatsApp</span>
                </a>
                <button id="shareCopy" class="share-option">
                    <span class="icon">ğŸ“‹</span>
                    <span class="label">Copia Link</span>
                </button>
                <button id="shareDownload" class="share-option">
                    <span class="icon">ğŸ’¾</span>
                    <span class="label">Salva Foto</span>
                </button>
            </div>
            <button id="shareCloseBtn" class="share-close">Chiudi</button>
        </div>
    </div>

    <!-- Leaderboard Modal -->
    <div id="leaderboardOverlay" class="modal-overlay"></div>
    <div id="leaderboardModal">
        <button id="closeLeaderboard">Ã—</button>
        <h2>ğŸ† CLASSIFICA RE MAGI</h2>
        <div id="loading">
            Caricamento...
        </div>
        <ul id="leaderboardList"></ul>
    </div>
</body>

<script src="controller.js"></script>
</html>